- add missing error checking on Allegro calls
- use smart pointers
